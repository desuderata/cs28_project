<!DOCTYPE html>
<!--
    Help page
    Helps the user understand and get around the page.
        Everyone should add how their page works and walk
        the user through how they could use it
    Filename: help.html
-->
{% extends 'base.html' %}
{% load static %}

{% block title_block %}
    Help Page
{% endblock %}

{% block head %}
<!-- chart.js -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.css" integrity="sha512-C7hOmCgGzihKXzyPU/z4nv97W0d9bv4ALuuEbSf6hm93myico9qa0hv4dODThvCsqQUmKmLcJmlpRmCaApr83g==" crossorigin="anonymous" />
<!-- <link rel="stylesheet" href="{% static 'css/header.css' %}"> -->
<!-- chart.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js" integrity="sha512-hZf9Qhp3rlDJBvAKvmiG+goaaKRZA6LKUO35oK6EsM0/kjPK32Yw7URqrq3Q+Nvbbt8Usss+IekL7CRn83dYmw==" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-deferred@1"></script>
<!-- temporarily add these until its merged -->
<style>
    .container-width {
        width: 99%
    }
    .bg-white {
        background-color: #fefefe;
    }
    @media (max-width: 979px) {
        .page-text {
            padding-left: 50px;
            padding-right: 50px;
            padding-top: 25px;
            padding-bottom: 25px;
        }
    }
    .page-text {
        padding-left: 75px;
        padding-right: 75px;
        padding-top: 50px;
        padding-bottom: 50px;
    }
</style>
{% endblock %}

{% block body_block %}
<div class="my-4 pb-3 container-fluid container-width bg-white">
    <div class="page-header row h-100 align-items-center bg-blue">
        <div class="page-text d-inline-flex text-white">
            <h1>Graphs</h1>
        </div>
    </div>
    <div class="container-fluid bg-light">
        <div class="row mt-3 pb-3 h-100">
            <div class="col-md-6">
                <canvas id="bar" width="400" height="400"></canvas>
            </div>
            <div class="col-md-6 align-self-center">
                <form id="dataset">
                    <div class="form-group">
                        <label for="type">Type</label>
                        <select class="form-control" id="type">
                            <option value="" selected disabled>Type</option>
                            <option value="plans">Between Academic Plans</option>
                            <option value="years">Between Academic Years</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group col">
                            <label for="year">Academic Year</label>
                            <select name="year" id="year" class="form-control">
                                <option value="" selected disabled>Academic Year</option>
                                {% for year in years %}
                                    <option value="{{ year.gradYear }}">{{ year.gradYear }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col">
                            <label for="plan">Academic Plan</label>
                            <select name="plan" id="plan" class="form-control">
                                <option value="" selected disabled>Academic Plan</option>
                                {% for plan in plans %}
                                    <option value="{{ plan.planCode }}">{{ plan.planCode }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col" onclick="return false">
                            <button id="add" type="submit" class="btn btn-secondary btn-block">Add</button>
                        </div>
                        <div class="form-group col" onclick="return false">
                            <button id="remove" type="submit" class="btn btn-secondary btn-block">Remove</button>
                        </div>
                        <div class="form-group col" onclick="return false">
                            <button id="reset" type="submit" class="btn btn-secondary btn-block">Reset</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}

<script>
    function getData(input) {
        count = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        for (let i=0; i < input.length; i++) {
            count[parseInt(input[i].gpa)]++;
        }
        return count;
    }

    $(function() {
        var token = '{{ csrf_token }}'

        $('#add').click(function() {
            data = $('#dataset').serialize()
            $.ajax({
                headers: { "X-CSRFToken": token },
                url: "{% url 'cs28:data' %}",
                type: "GET",
                data: data,
                success: function (data) {
                    var data = console.log(getData(data));
                }
            })
        })
    })

    const ttpt = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,
                  12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22]

    $(document).ready(function() {
        var bar = document.getElementById('bar').getContext('2d');
        var myChart = new Chart(bar, {
            type: 'bar',
            data: {
                labels: ttpt,
                datasets: []
            },
            // data: {
            //     labels: ttpt,
            //     datasets: [{
            //         label: 'Foo',
            //         data: ttpt,
            //         // backgroundColor: [
            //         //     'rgba(255, 99, 132, 0.2)',
            //         //     'rgba(54, 162, 235, 0.2)',
            //         //     'rgba(255, 206, 86, 0.2)',
            //         //     'rgba(75, 192, 192, 0.2)',
            //         //     'rgba(153, 102, 255, 0.2)',
            //         //     'rgba(255, 159, 64, 0.2)'
            //         // ],
            //         // borderColor: [
            //         //     'rgba(255, 99, 132, 1)',
            //         //     'rgba(54, 162, 235, 1)',
            //         //     'rgba(255, 206, 86, 1)',
            //         //     'rgba(75, 192, 192, 1)',
            //         //     'rgba(153, 102, 255, 1)',
            //         //     'rgba(255, 159, 64, 1)'
            //         // ],
            //         backgroundColor: 'rgba(255, 99, 132, 0.2)',
            //         borderColor: 'rgba(255, 99, 132, 1)',
            //         borderWidth: 1
            //     }]
            // },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            stepSize: 2,
                            max: 22,
                            min: 0
                        },
                    }],
                }
            }
        });
    });
</script>
{% endblock %}
